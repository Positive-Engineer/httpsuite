
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <title>Quickstart &#8212; httpsuite 0.1.0 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Basic Use" href="Basic Use.html" />
    <link rel="prev" title="Installing" href="../index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installing">
<h2>Installing<a class="headerlink" href="#installing" title="Permalink to this headline">¶</a></h2>
<p>To get started with <code class="docutils literal notranslate"><span class="pre">httpsuite</span></code>, install the latest stable release from
<a class="reference external" href="https://pypi.org/project/httpsuite/">PyPi</a>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install httpsuite
</pre></div>
</div>
<p>If you would like to use the latest non-stable release, you may install directly
from Github:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install git+https://github.com/synchronizing/httpsuite
</pre></div>
</div>
</div>
<div class="section" id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>There are two main abstractions that <code class="docutils literal notranslate"><span class="pre">httpsuite</span></code> provides, <code class="docutils literal notranslate"><span class="pre">Request</span></code> and
<code class="docutils literal notranslate"><span class="pre">Response</span></code>. Both provide an interface to interpret, modify, and compile
raw HTTP messages.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">httpsuite</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">Response</span>
</pre></div>
</div>
<p>You may either chose to initialize them via their <code class="docutils literal notranslate"><span class="pre">__init__</span></code> methods:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span>
    <span class="n">method</span><span class="o">=</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span>
    <span class="n">target</span><span class="o">=</span><span class="s2">&quot;/&quot;</span><span class="p">,</span>
    <span class="n">protocol</span><span class="o">=</span><span class="s2">&quot;HTTP/1.1&quot;</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">body</span><span class="o">=</span><span class="kc">None</span>
<span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">Response</span><span class="p">(</span>
    <span class="n">protocol</span><span class="o">=</span><span class="s2">&quot;HTTP/1.1&quot;</span><span class="p">,</span>
    <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
    <span class="n">status_msg</span><span class="o">=</span><span class="s2">&quot;OK&quot;</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">body</span><span class="o">=</span><span class="kc">None</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Or, parse them from raw HTTP messages via their <code class="docutils literal notranslate"><span class="pre">parse()</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;GET / HTTP/1.1</span><span class="se">\r\n\r\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">Response</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;HTTP/1.1 200 OK</span><span class="se">\r\n\r\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Once you have initialized a <code class="docutils literal notranslate"><span class="pre">Request</span></code> or <code class="docutils literal notranslate"><span class="pre">Response</span></code> message, you can modify
and then compile.</p>
</div>
<div class="section" id="modifying-messages">
<h2>Modifying Messages<a class="headerlink" href="#modifying-messages" title="Permalink to this headline">¶</a></h2>
<p>Modifying <code class="docutils literal notranslate"><span class="pre">Request</span></code> or <code class="docutils literal notranslate"><span class="pre">Response</span></code> objects is done as one would expect:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="s2">&quot;POST&quot;</span>
<span class="n">response</span><span class="o">.</span><span class="n">status</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;300&quot;</span>
<span class="n">response</span><span class="o">.</span><span class="n">status_msg</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;Continue&quot;</span>
</pre></div>
</div>
<p>Notice, however, that setting a <code class="docutils literal notranslate"><span class="pre">Request</span></code> or <code class="docutils literal notranslate"><span class="pre">Response</span></code> value is type-agnostic.
In other words, it does not matter if you set a piece of data as a <code class="docutils literal notranslate"><span class="pre">str</span></code>,
<code class="docutils literal notranslate"><span class="pre">bytes</span></code>, or <code class="docutils literal notranslate"><span class="pre">int</span></code>. Similarly, comparisons are type-agnostic:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">request</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="mi">300</span>     <span class="c1"># True</span>
<span class="n">request</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="s2">&quot;300&quot;</span>   <span class="c1"># True</span>
<span class="n">request</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="sa">b</span><span class="s2">&quot;300&quot;</span>  <span class="c1"># True</span>
</pre></div>
</div>
</div>
<div class="section" id="compiling-message">
<h2>Compiling Message<a class="headerlink" href="#compiling-message" title="Permalink to this headline">¶</a></h2>
<p>After modifying the message, the final step is to compile the message. Compiling
is simply translating our object from Python to bytes (following specific rules),
so that another computer on the internet can understand us. One does this by calling
the property <code class="docutils literal notranslate"><span class="pre">raw</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">body</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">&quot;hello&quot;</span><span class="p">:</span> <span class="s2">&quot;world&quot;</span><span class="p">})</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span>
    <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
    <span class="n">target</span><span class="o">=</span><span class="s2">&quot;/post&quot;</span><span class="p">,</span>
    <span class="n">protocol</span><span class="o">=</span><span class="s2">&quot;HTTP/1.1&quot;</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;Host&quot;</span><span class="p">:</span> <span class="s2">&quot;httpbin.org&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Connection&quot;</span><span class="p">:</span> <span class="s2">&quot;close&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Content-Length&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">body</span><span class="p">),</span>
        <span class="s2">&quot;Accept&quot;</span><span class="p">:</span> <span class="s2">&quot;*/*&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">raw</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sa">b</span><span class="s1">&#39;POST /post HTTP/1.1</span><span class="se">\r\n</span><span class="s1">Host: httpbin.org</span><span class="se">\r\n</span><span class="s1">Connection: close</span><span class="se">\r\n</span><span class="s1">Content-Length: 18</span><span class="se">\r\n</span><span class="s1">Accept: */*</span><span class="se">\r\n\r\n</span><span class="s1">{&quot;hello&quot;: &quot;world&quot;}&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<p>A simple example of using <code class="docutils literal notranslate"><span class="pre">httpsuite</span></code> with sockets to send our message above:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot; Example of using httpsuite to communicate with an external web server using sockets.</span>

<span class="sd">1. Open a new socket.</span>
<span class="sd">2. Creates the request to be sent via Request object.</span>
<span class="sd">3. Connect to httpbin.org via socket.</span>
<span class="sd">4. Send generated request to server.</span>
<span class="sd">5. Receive raw response from server.</span>
<span class="sd">6. Parse the server&#39;s response with Response object.</span>
<span class="sd">7. Loads the response&#39;s body via JSON.</span>
<span class="sd">8. Close socket.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">httpsuite</span> <span class="kn">import</span> <span class="n">Request</span><span class="p">,</span> <span class="n">Response</span>
<span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">json</span>

<span class="c1"># 1. Open a new socket.</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>

<span class="c1"># 2. Creates the request to be sent via Request object.</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s2">&quot;hello&quot;</span><span class="p">:</span> <span class="s2">&quot;world&quot;</span><span class="p">})</span>
<span class="n">request</span> <span class="o">=</span> <span class="n">Request</span><span class="p">(</span>
    <span class="n">method</span><span class="o">=</span><span class="s2">&quot;POST&quot;</span><span class="p">,</span>
    <span class="n">target</span><span class="o">=</span><span class="s2">&quot;/post&quot;</span><span class="p">,</span>
    <span class="n">protocol</span><span class="o">=</span><span class="s2">&quot;HTTP/1.1&quot;</span><span class="p">,</span>
    <span class="n">headers</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;Host&quot;</span><span class="p">:</span> <span class="s2">&quot;httpbin.org&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Connection&quot;</span><span class="p">:</span> <span class="s2">&quot;close&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Content-Length&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">body</span><span class="p">),</span>
        <span class="s2">&quot;Accept&quot;</span><span class="p">:</span> <span class="s2">&quot;*/*&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="n">body</span><span class="o">=</span><span class="n">body</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># Prints the raw request.</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;====== Raw Request ======&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">raw</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 3. Connect to httpbin.org via socket.</span>
<span class="n">s</span><span class="o">.</span><span class="n">connect</span><span class="p">((</span><span class="s2">&quot;httpbin.org&quot;</span><span class="p">,</span> <span class="mi">80</span><span class="p">))</span>

<span class="c1"># 4. Send generated request to server.</span>
<span class="n">s</span><span class="o">.</span><span class="n">sendall</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">raw</span><span class="p">)</span>

<span class="c1"># 5. Receive raw response from server.</span>
<span class="n">response_raw</span> <span class="o">=</span> <span class="n">s</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">4096</span><span class="p">)</span>

<span class="c1"># Prints the raw response.</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;====== Raw Response ======&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response_raw</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 6. Parse the server&#39;s response with Response object.</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">Response</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">response_raw</span><span class="p">)</span>

<span class="c1"># Prints the request and the response (pretty-print).</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;====== Request and Response ======&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># 7. Loads the response&#39;s body via JSON.</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">body</span><span class="o">.</span><span class="n">string</span><span class="p">)</span>

<span class="c1"># Prints the loaded json (&#39;dumps&#39; for pretty-print).</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;====== Json ======&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>

<span class="c1"># 8. Close socket.</span>
<span class="n">s</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</td></tr></table></div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">httpsuite</a></h1>



<p class="blurb">Collection of tools to parse, manipulate, and compile raw HTTP messages.</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=synchronizing&repo=httpsuite&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installing">Installing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="#modifying-messages">Modifying Messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="#compiling-message">Compiling Message</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Basic Use.html">Basic Use</a></li>
<li class="toctree-l1"><a class="reference internal" href="Advance Use.html">Advance Use</a></li>
</ul>
<p class="caption"><span class="caption-text">Package</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../module/core.html">Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../module/helpers.html">Helpers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../module/RFC.html">RFC</a></li>
</ul>
<p class="caption"><span class="caption-text">Misc</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../misc/Versions.html">Versions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/License.html">License</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../index.html" title="previous chapter">Installing</a></li>
      <li>Next: <a href="Basic Use.html" title="next chapter">Basic Use</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Felipe Faria.
      
      |
      <a href="../_sources/writeups/Quickstart.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>